in-project: &in-project
  shell_command_before: cd $HOME/code/web-client

in-api: &in-api
  shell_command_before: cd $HOME/code/miralaw-api

session_name: miralaw
windows:
  - <<: *in-project
    window_name: editor
    panes:
      - eval $EDITOR
  - <<: *in-project
    window_name: ember test
    panes:
      - node_modules/.bin/ember test --server --port=7357
  - <<: *in-project
    window_name: ember serve
    panes:
      - node_modules/.bin/ember serve
  - <<: *in-project
    window_name: shell
    panes: [{}]
  - <<: *in-api
    window_name: api
    panes: [{}]
  - <<: *in-api
    window_name: api log
    panes:
      - tail -f log/development.log
  - <<: *in-api
    window_name: api worker
    panes:
      - bundle exec rake jobs:work
